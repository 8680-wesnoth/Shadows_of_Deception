#textdomain wesnoth-Shadows_of_Deception

#define ANIMATED_FOUNTAIN _X _Y
    [terrain_graphics]
        x={_X}
        y={_Y}
        [tile]
            x=0
            y=0
            [image]
                layer=0
                name="../scenery/fountain-[01~13].png:100"
            [/image]
        [/tile]
    [/terrain_graphics]
#enddef

#define ITEM_TOUCHPLATE _X _Y
    [item]
        x={_X}
        y={_Y}
        halo="items/touchplate.png~O(0.05):1600,items/touchplate.png~O(0.10):10,items/touchplate.png~O(0.15):10,items/touchplate.png~O(0.20):10,items/touchplate.png~O(0.25):10,items/touchplate.png~O(0.30):10,items/touchplate.png~O(0.35):10,items/touchplate.png~O(0.40):10,items/touchplate.png~O(0.45):10,items/touchplate.png~O(0.50):10,items/touchplate.png~O(0.55):10,items/touchplate.png~O(0.60):10,items/touchplate.png~O(0.65):10,items/touchplate.png~O(0.70):10,items/touchplate.png~O(0.75):10,items/touchplate.png~O(0.80):10,items/touchplate.png~O(0.85):10,items/touchplate.png~O(0.90):10,items/touchplate.png~O(0.95):10,items/touchplate.png:640,items/touchplate.png~O(0.95):10,items/touchplate.png~O(0.90):10,items/touchplate.png~O(0.85):10,items/touchplate.png~O(0.80):10,items/touchplate.png~O(0.75):10,items/touchplate.png~O(0.70):10,items/touchplate.png~O(0.65):10,items/touchplate.png~O(0.60):10,items/touchplate.png~O(0.55):10,items/touchplate.png~O(0.50):10,items/touchplate.png~O(0.45):10,items/touchplate.png~O(0.40):10,items/touchplate.png~O(0.35):10,items/touchplate.png~O(0.30):10,items/touchplate.png~O(0.25):10,items/touchplate.png~O(0.20):10,items/touchplate.png~O(0.15):10,items/touchplate.png~O(0.10):10"
    [/item]
#enddef

#define CHEST_WITH_GOLD X Y AMOUNT
    [item]
        x={X}
        y={Y}
        image=items/chest-plain-closed.png
    [/item]

    [event]
        name=moveto
        [filter]
            x={X}
            y={Y}
            side=1
        [/filter]

        [sound]
            name=open-chest.wav
        [/sound]

        [transient_message]
            caption= _ "Chest with gold"
            image=icons/coins_copper.png
            message={AMOUNT}+_" gold found." # wmllint: ignore
            sound=gold.ogg
        [/transient_message]

        {ADD_GOLD 1 {AMOUNT}}

        [floating_text]
            [filter]
                x,y={X},{Y}
            [/filter]
            text="<span color='#e1e119'>{AMOUNT}</span>" # wmllint: ignore # wmlint: no spellcheck
        [/floating_text]

        {REMOVE_IMAGE {X} {Y}}
        {PLACE_IMAGE items/chest-plain-open.png {X} {Y}}
    [/event]
#enddef

# Action that will be fired upon taking a specified item.
# The event will even remove itself.
#define ACTIONS_WHEN_PICKED_UP_ITEM _ITEM _WML
    [event]
        id={_ITEM}_post_taken_actions
        name={_ITEM}_taken

        {_WML}

        [event]
            id={_ITEM}_post_taken_actions
            remove=yes
        [/event]
    [/event]
#enddef

# wmlindent: start ignoring
#define __HALO_CRYSTAL_GLYPH
halo/glyph-halo.png~O(0.4):500,halo/glyph-halo.png~O(0.48):200,halo/glyph-halo.png~O(0.54):200,halo/glyph-halo.png~O(0.48):200 #enddef
# wmlindent: stop ignoring

#define ITEM_CRYSTAL_GLYPH _X _Y
    [item]
        x={_X}
        y={_Y}
        image=items/crystal-glyph.png
        halo={__HALO_CRYSTAL_GLYPH}
    [/item]
#enddef

#define ITEM_CRYSTAL_GLYPH_POWERUP _X _Y
    [item]
        x={_X}
        y={_Y}
        image=items/crystal-glyph-powerup.png
        halo={__HALO_CRYSTAL_GLYPH}
    [/item]
#enddef

#define ITEM_CRYSTAL_GLYPH_GATE _X _Y
    [item]
        x={_X}
        y={_Y}
        image=items/crystal-glyph-gate.png
        halo={__HALO_CRYSTAL_GLYPH}
    [/item]
#enddef

#define GATE_KEY_ACTIONS _TARGET_X _TARGET_Y
    [redraw][/redraw]

    [message]
        speaker=narrator
        image="icons/key_silver.png"
        sound="{SOUND_LIST:UNLOCK}"
        message= _ "Door unlocked."
    [/transient_message]

    [remove_item]
        x,y=$x1,$y1
    [/remove_item]

    {REMOVE_EVENT_BARRIER ("*^Ngl\,*^Ngl/") ({_TARGET_X}) ({_TARGET_Y})}
#enddef

#define GATE_GLYPH_ACTIONS _TARGET_X _TARGET_Y
    [redraw][/redraw]

    [message]
        speaker=narrator
        image="items/crystal-glyph-gate.png"
        # sound="magic-3.ogg"
        message= _ "Access granted."
    [/message]

    [remove_item]
        x,y=$x1,$y1
    [/remove_item]

    {REMOVE_EVENT_BARRIER ("*^Ngl\,*^Ngl/") ({_TARGET_X}) ({_TARGET_Y})}
#enddef

#define GATE_GLYPH _GLYPH_X _GLYPH_Y _TARGET_X _TARGET_Y
    {ITEM_CRYSTAL_GLYPH_GATE ({_GLYPH_X}) ({_GLYPH_Y})}

    [event]
        name=moveto
        [filter]
            side=1
            x={_GLYPH_X}
            y={_GLYPH_Y}
        [/filter]

        {LOCK_VIEW}

        {GATE_GLYPH_ACTIONS ({_TARGET_X}) ({_TARGET_Y})}

        {UNLOCK_VIEW}
    [/event]
#enddef
